<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Jun 21, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20130621" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Maven OSGi Distribution plugin</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/AdeleResearchGroup/osgi-distribution-plugin">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>OSGi Distribution Plugin :: Distribution Plugin</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2013-06-21</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.0.1</li>
                      
                
            
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
            
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                                
      <li>
    
                          <a href="index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                  
      <li>
    
                          <a href="plugin-info.html" title="Goals">
          <i class="none"></i>
        Goals</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Usage</a>
          </li>
                  
      <li>
    
                          <a href="quickstart.html" title="Quickstart">
          <i class="none"></i>
        Quickstart</a>
            </li>
                  
      <li>
    
                          <a href="faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                  
      <li>
    
                          <a href="changelog.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                        
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                                              
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
            
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Usage</h1>

<p>Best practice is to define the version of the OSGi distribution plugin that you want to use in either your <em>pom.xml</em>
or a parent <em>pom.xml</em>.</p>

<pre><code>&lt;project&gt;
    [...]
    &lt;build&gt;
        &lt;pluginManagement&gt;
            &lt;plugins&gt;
                &lt;plugin&gt;
                    &lt;groupId&gt;fr.liglab.adele.common&lt;/groupId&gt;
                    &lt;artifactId&gt;maven-osgi-distribution-plugin&lt;/artifactId&gt;
                    &lt;version&gt;1.0.1&lt;/version&gt;
                &lt;/plugin&gt;
            &lt;/plugins&gt;
        &lt;/pluginManagement&gt;
    &lt;/build&gt;
    [...]
&lt;/project&gt;
</code></pre>

<p>To use the maven-osgi-distribution-plugin Plugin, you need to add the following configuration to your <em>pom.xml</em></p>

<pre><code>&lt;project&gt;
    [...]
    &lt;packaging&gt;osgi-distribution&lt;/packaging&gt;
    [...]
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;fr.liglab.adele.common&lt;/groupId&gt;
                &lt;artifactId&gt;maven-osgi-distribution-plugin&lt;/artifactId&gt;
                &lt;version&gt;1.0.1&lt;/version&gt;
                &lt;extensions&gt;true&lt;/extensions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    [...]
&lt;/project&gt;
</code></pre>

<p>The maven-osgi-distribution-plugin Plugin is invoked during the:</p>

<ul>
<li><em>process-resources</em> phase : copy dependencies to the configured directories</li>
<li><em>package</em> phase: build the application package</li>
</ul>

<p>A full run, executing all the above steps:</p>

<pre><code>mvn clean install
</code></pre>

<h2>Configuration Options</h2>

<p>Plugin configuration options
 * <code>defaultOutputDirectory</code> to specify the location of the artifacts declared in the dependency section. Except for artifacts defined in the <code>outputs</code> section. Default value <code>load</code>.
 * <code>generateScripts</code> to generate launcher temporal scripts (useful while testing distribution) Default value <code>false</code>.
 * <code>flattenDP</code> to specify if Deployment-Packages dependencies will be flatten in the distribution or not. Default value <code>false</code>.
 * <code>outputs</code> used to configure target location for some artifacts.
 * <code>output</code> the entry to define the desired artifact.
 * <code>IncludesArtifactId</code> the artifactId.
 * <code>directory</code> the target directory location of the current artifact.
 * <code>outputFileName</code> if defined, the artifact filename will be overrided by this value.</p>

<h2>Configuration Example</h2>

<p>An output configuration example :</p>

<pre><code>&lt;outputs&gt;
    &lt;output&gt;
        &lt;IncludesArtifactId&gt;org.apache.felix.main&lt;/IncludesArtifactId&gt;
        &lt;directory&gt;bin&lt;/directory&gt;
        &lt;outputFileName&gt;felix.jar&lt;/outputFileName&gt;
    &lt;/output&gt;
    &lt;output&gt;
        &lt;IncludesArtifactId&gt;org.apache.felix.fileinstall&lt;/IncludesArtifactId&gt;
        &lt;directory&gt;bundles&lt;/directory&gt;
    &lt;/output&gt;
&lt;/outputs&gt;
</code></pre>

<p>Results in the following :</p>

<ul>
<li>The felix dependency will be redirected to the "bin" directory, and will be renamed to "felix.jar".</li>
<li>The fileinstall dependency will be redirected to the "bundles" directory.</li>
<li>All other dependencies go to the "load" folder (default behavior).</li>
</ul>

<p>Projects using this plugin need to use the "osgi-distribution" packaging type, and call the plugin in their plugins section.</p>

<pre><code>&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;fr.liglab.adele.common&lt;/groupId&gt;
            &lt;artifactId&gt;maven-osgi-distribution-plugin&lt;/artifactId&gt;
            &lt;version&gt;@project.version@&lt;/version&gt;
            &lt;extensions&gt;true&lt;/extensions&gt;
            &lt;configuration&gt;
                &lt;defaultOutputDirectory&gt;bundle&lt;/defaultOutputDirectory&gt;
                &lt;generateScripts&gt;true&lt;/generateScripts&gt;
                &lt;outputs&gt;
                    ...
                &lt;/outputs&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>

<p>To run the plugin, just call the "install" goal on your project.</p>

<h2>Flatten Deployment packages</h2>

<p>By default the plugin copy all deployment packages defined as project dependencies. If you prefer not to rely on
deployment packages, you can ask to flatten all deployment packages using flattenDP configuration option:</p>

<pre><code>&lt;project&gt;
    [...]
    &lt;packaging&gt;osgi-distribution&lt;/packaging&gt;
    [...]
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;fr.liglab.adele.common&lt;/groupId&gt;
                &lt;artifactId&gt;maven-osgi-distribution-plugin&lt;/artifactId&gt;
                &lt;version&gt;1.0.1&lt;/version&gt;
                &lt;extensions&gt;true&lt;/extensions&gt;
                &lt;configuration&gt;
                    &lt;flattenDP&gt;true&lt;/flattenDP&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    [...]
&lt;/project&gt;
</code></pre>

<h2>Adding files to OSGi distribution package</h2>

<p>You can set additional files to be appended to the OSGi distribution zip file. You only need to put them into the
src/main/resources folder. Relative path to copied resources is preserved into the zip file.</p>

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2013
                        <a href="http://www-adele.imag.fr">Adele Team | LIG</a>.
            All Rights Reserved.      
            
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
